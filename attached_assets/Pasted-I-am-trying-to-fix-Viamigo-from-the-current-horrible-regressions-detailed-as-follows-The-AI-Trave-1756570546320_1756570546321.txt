I am trying to fix Viamigo from the current horrible regressions detailed as follows:
-The AI Travel Assistant shoudl be dynamic but it is instead a bad mixture of preloaded stuff in Postgres (mostly about Genova) and the scraping integration we added is miserably failing
-Whenever the itinerary has a sense, details of the itinerary are never loaded and the companio AI that should be the most important part of the app is never working
-map is always hallucinated, often hardcoded to Genoa even if the itinerary is regarding for example New York,the stops are randmly connected in a casual sequence,no nearest distant stops connection logic,no distance displayed,stops number missed or totally wrong
Goals are:
-to have An app that plans my days in a specific location—of course I’ll first set it according to my preferences.
For example, I might ask: on the first day I’d like to start from Via XX Settembre and arrive at Via Roma in Genoa. I’m traveling by metro. 
Tell me which line to take and where to get off. Tell me how to reach my destination on foot from the metro. 
Suggest other things to see nearby (and naturally I’ll have set my preferences—whether I want to visit museums, 
thermal baths, parks, pubs, exhibition areas, markets, etc.). Set everything up so I don’t arrive and discover that the museum is closed on that very day. 
Let me know if the thermal baths might be too crowded that day and I risk not finding a place.
Is it worth getting a card/pass to visit museums and use public transport based on the length of my stay and what I can realistically see? Recommend it or advise against it.

- to have a compagnion AI advising of unpredicted events (museum closed or crowded,bad weather,traffic issues and so on) in real time via OpenAI.
-to have Maps showing the itineary clearly and with some further info.
-To Generate the itinerary tailored on my preferences in the profile:arts,food,nature and so on.


So I want you to do the following:
- Research deeply across my codebase
- Find what files and functions are related to the problems and goals I outlined above
- Assess reasons for why the feature might not be working or why it might not work. If I am asking for something impossible or a task you do not have the tools to accomplish, let me know.
- Develop a plan to fix it
- Write this entire plan and report into a file called "Instructions.md" in my project
-don't change the graphical structure of the app:css.htmls and so on.